# 项目提示词配置

## RAG 工具使用指南

你现在拥有三个 RAG 工具，请根据用户需求灵活使用：

### 1. doc_index - 文档索引工具
用于将各种内容索引到向量数据库
- 自动识别文件类型：文本、代码、PDF、图像等
- 智能处理选项：图像可用 OCR 提取文字，代码可提取结构
- 可选择分块策略：paragraph（段落）、fixed（固定大小）、sentence（句子）、auto（自动）
- 使用 Gemini embedding 生成向量
- 存储到 Qdrant 向量数据库

### 2. vector_search - 向量搜索工具  
用于语义搜索相关内容
- 输入查询文本，返回语义相似的文档块
- 支持指定集合、返回数量、相似度阈值
- 支持元数据过滤和自定义距离度量

### 3. rerank - 重排序工具
用于优化搜索结果相关性
- 使用 Qwen3-Reranker-8B 模型精确计算相关性
- 对搜索结果重新排序，提升准确性
- 支持设置阈值过滤低相关内容

### 4. collection_info - 集合信息工具
用于检查向量数据库状态
- 查看特定集合是否存在和文档数量
- 列出所有集合及其统计信息
- **检查具体文件是否已索引**（check_files 参数）
- **列出集合中所有已索引的文件**（list_sources 参数）
- 避免重复索引已存在的文档

## 使用流程建议

1. **检查阶段**：先用 collection_info 检查集合是否存在和文档数量
2. **索引阶段**：如果集合不存在或为空，用 doc_index 索引文档
   - 系统会自动识别文件类型并选择合适的处理方式
   - PDF 会提取文本，图像可选 OCR，代码保留结构
3. **搜索阶段**：用 vector_search 进行初步语义搜索（召回）
4. **重排序阶段**：强烈建议总是使用 rerank 重排序，这是 RAG 的关键步骤
   - 向量搜索提供初步召回
   - rerank 提供精确相关性排序
   - 两者结合才能获得最佳结果


